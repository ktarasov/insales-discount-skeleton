# Пример кода внешней скидки InSales

## Преамбула

Этот код представляет собой пример реализации обработчика внешней скидки для платформы <a href="http://www.insales.ru/?aff=f264a7f82" target="_blank">InSales</a>.

Вы можете свободно использовать (в рамках [лицензии](LICENSE.md)) его для изучения или создания собственных скидок для вашего интернет-магазина, работающего на платформе InSales, в рамках лицензионного соглашения.

## Обслуживаемые адреса

| URL            | Назначение                                         |
|----------------|----------------------------------------------------|
| /discount      | Основной адрес, который задействует механиз скидки |
| /test-discount | Адрес для проверки данных отправляемых InSales     |

## Что нужно, чтобы развернуть скидку на своем сервере

<ol>
    <li><b>Домен для механизма скидки</b>: Создайте субдомен третьего уровня на основном домене вашего интернет-магазина — например, ins.my-shop.ru.</li>
    <li><b>Хостинг с необходимыми функциями</b>: Подберите надежный хостинг, поддерживающий PHP и SSL-сертификаты. Даже самый базовый вариант подойдет для ваших нужд.</li>
    <li><b>Технические навыки и мотивация</b>: Важно понимать основы PHP, а также обладать любопытством и стремлением к обучению. Это поможет вам эффективно разобраться и реализовать необходимый механизм скидки.</li>
</ol>

Не забудьте установить значение `prod` для настройки `APP_ENV` при развертывании на хостинге. Более подробную информацию вы найдёте в разделе [«Настройки»](#app-settings).

## <a id="app-settings"></a>Настройки

В целом, количество настроек невелико, и все они содержатся в файле [.env](.env).


| Название настройки | Значение по-умолчанию                  | Описание настройки                                                                                                                                                                                                       |
|--------------------|----------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| APP_ENV            | dev                                    | Режим работы сайта. Для работы в продакшене нужно изменить на `prod`                                                                                                                                                     |
| DISCOUNT_TITLE     | Скидка на самый дешевый товар в заказе |                                                                           Название скидки, которое передается в InSales                                                                                                  |
| DISCOUNT_TYPE      | MONEY                                  |                                                                                                                        Тип скидки. MONEY - скидка в рублях, PERCENT - скидка в процентах                                 |
| DISCOUNT_ROUND     | false                                  |                                                                                                                                                                                         Округлять скиду до целого или нет|

## Полезные ссылки

[Официальная документация по внешним скидкам](https://www.insales.ru/collection/doc-skidki/product/vneshnie-skidki)

[Если возникли вопросы и нужна консультация](mailto:sales+dec@insales-studio.ru)

[Если нужна помощь в разработке скидки для магазина](mailto:sales+dev@insales-studio.ru)

[Если нужна помощь в развертывании скдики на хостинге](mailto:sales+host@insales-studio.ru)

Если вам не хочется тратить время на изучение PHP, настройку хостинга и другие технические аспекты, то наш [сервис внешних скидок](https://insales-discounts.ru) — это то, что вам нужно!
